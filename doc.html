<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web news provenance tool">
    <meta name="keywords" content="project, wade, info uaic, HTML, CSS, JavaScript, Django, Python, web news provenance, ontology, web semantics, things not strings ">
    <meta name="author" content=" Hrib Ecaterina-Nicoleta, Platica Alexandru">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentatie Nep - Web News provenance</title>
    <link rel="stylesheet" type="text/css" href="doc.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;1,200&display=swap" rel="stylesheet">
</head>

<body>
    <div class="banner">
        <img src="https://w3c.github.io/scholarly-html/scholarly-html.svg" width="227" height="50" alt="Scholarly HTML logo">
        <div class="status">WADE Project</div>
    </div>

    <header>
        <h1 class="title">Documentation NEP - web news provenance </h1>
    </header>

    <div role="contentinfo" style="font-size:1vw">
        <section typeof="sa:AuthorList">
            <h2>Team: Fine Dining</h2>
            <h2>Authors</h2>
            <ul>
                <li> Hrib Ecaterina-Nicoleta <a class="authors"
                        href="mailto:ecaterina.hrib@gmail.com">ecaterina.hrib@gmail.com</a> </li>
            </ul>
            <ul>
                <li> Platica Alexandru <a class="authors"
                        href="mailto:platicaalex@gmail.com">platicaalex@gmail.com</a> </li>
            </ul>
        </section>

        <section>
            <h1>Content</h1>
            <div class="content">
                <ol role="directory">
                    <li class="no-number"><a href="#description"><span>1. </span>General Description</a>
                    </li>

                    <li class="no-number"><a href="#architecture"><span>2. </span>Architecture</a>
                        <ol role="directory">
                            <li class="no-number"><a href=""><span>2.1 </span> Use Case Diagrams </a></li>
                            <li class="no-number"><a href=""><span>2.2 </span> C4 Diagrams </a></li>
                        </ol>
                    </li>
                    <li class="no-number"><a href="#Modelling_data"> <span>3. </span> Building Custom Dataset </a>
                    </li>

                    <li class="no-number"><a href="#Modelling_data"> <span>4. </span>Modelling data </a>
                        <ol role="directory">

                            <li class="no-number"><a href=""><span>4.1 </span> OpenAPI</a></li>
                            <li class="no-number"><a href=""><span>4.2 </span> Ontology structure</a></li>
                            <li class="no-number"><a href=""><span>4.2 </span> Linked data Graph</a></li>
                        </ol>
                    </li>

                    <li class="no-number"><a href="#References"><span>4. </span>References</a>
                        <ol role="directory">

                        </ol>
                    </li>

                </ol>
            </div>
        </section>

        <section id="description" role="doc-intro">
            <h2> 1. Description of the project</h2>
            <p>
                A web application meant to query and process linked data regarding web news, and news provenance, for an online article
                textual or multimedia content.

            </p>
            <p>
                The application is destined for persons who want to find out the provenance for a web news online
                article and it's data, and search with different filters.
                The application is using Jena Fuseki for data storing, updating and searching data using SPARQL queries.
            </p>
        </section>

        <section id="architecture">
            <h2> 2. Architecture: </h2>
            <p>
               As programming language is used Python and Django Framework for the development of the application.</p>
            <p> The Django Framework uses MVT architecture pattern being the Model-View-Template, where templates act like controllers.</p>
                <p>This pattern is derived from MVC(Model-View-Controller), the three levels of architecture or 3 components.
                   The Model component stores the data that is being transmitted between Controller component and the View component. </p>
                 <p>  Controllers are the actions made on a specific objects and it's behaviour in certain situations.
                   The View, is what a client sees in the web application, is the UI transmitted to the user.
            </p>
            <p> The application will have the ability to let the user, to model the search for an article,
                such as filtering info data using query execution, visualise response and recommend new searches or similar ones. </p>
            <p> The search data is formed by our custom-built Dataset from crawling in different web news sites,
                and extracting the needed information to build the graph ontology
                 and using SPARQL endpoint to manage the data modelling.</p>
            <p> The application will have different filters for finding the best occurrences.
            <h3> Use case Diagram: </h3>
            <img src="use-case.png" alt="A use case diagram" class="center">
            <h3> C4 Diagrams </h3>
            <p> Level 1 C4 Diagram:</p>
            <img src="c4-1.png" alt="A c4 diagram" class="center">
            <p> Level 2 C4 Diagram:</p>
            <img src="c4-2.png" alt="A c4 diagram" class="center">
            <p> Level 3 C4 Diagram:</p>
            <img src="c4-3.png" alt="A c4 diagram" class="center">
        </section>
        <section id="Dataset">
            <h2> 3. Building Custom dataset: </h2>
            <h5> Crawling data json:</h5>
            <p>Here is the information tooked from each web news article in order to build our custom graph</p>
            <p>The articles used in the processing of the knowledge graph were provided by libertatea.ro,
                we choose this site because we could take the information we needed for the processing.
                We crawled about 500 fresh editorials on different topics such as Fashion, Tech, News, Politcs, Lifestype, Horoscope etc.</p>
            <p> The information was parsed from the json-ld provided by the web news application throught the crawler that iterated over all approximately 500 articles</p>
            <h4>Example crawled article</h4>
            <pre>
     {
    "article2": {
      "articleName": "Expert: Prețul gazelor va exploda în România după perioada de plafonare",
      "articleBody": "\nPopulația va avea facturi facturi duble la gaze din aprilie 2025, după expirarea perioadei de plafonare a prețurilor, dacă Guvernul nu va lua decizii care să evite acest lucru, arată, într-o analiză, Dumitru Chisaliță - președintele asociației Energia Inteligentă.\n\n\n\n\n\n\n\nPentru protejarea consumatorilor de gaze în 2022 autoritățile au plafonat prețul gazelor la 0,31 de lei/kWh, cu despăgubirea furnizorilor care au costuri peste acest nivel. Plafonarea este valabilă până în luna aprilie a anului 2025.\n\n\n\nÎnsă acest lucru a dus la mai multe efecte pe piața gazelor, conform expertului:\n\n\n\n\nDispariția concurenței și menținerea unor prețuri mari pe piața gazelor.\n\n\n\nEșecul liberalizării din 2020, în principal din lipsa pregătirii consumatorilor, peste care s-au suprapus comportamentele abuzive ale unor furnizori și inacțiunea „câinilor de pază” ANRE, ANPC și Consiliul Concurenței, care, combinate cu criza gazelor, au dus la erodarea ideii de piață liberă.\n\n\n\nLecția însușită de autorități cum că piața liberă înseamnă mai puțini bani la buget și mai multe critici.\n\n\n\nUE a acceptat modificarea ideii care a stat la baza nașterii sale, respectiv libera circulație a mărfurilor.\n\n\n\n\n\nMenținerea prețurilor a fost determinată și de faptul că prin schema de compensare a diferenței între prețurile plafonate și costurile de achiziție se acceptau orice prețuri pentru gazele achiziționate. Această situație va fi greu de înlăturat și va necesita un timp în care reapariția concurenței ar putea să reechilibreze lucrurile. Estimăm că această situație nu poate să fie mai mică de un an.\nDumitru Chisăliță, președinte Asociația Energia Inteligentă:\n\n\n\nDumitru Chisăliță, președinte Asociația Energia Inteligentă\n\n\n\nPatru variante\n\n\n\nAcesta explorează patru opțiuni pe care le are statul.\n\n\n\n1. Varianta de a nu face nimic. „Prețul gazelor în contractele de vânzare gaze, care sunt suspendate până în 31 martie 2025, sunt la un nivel de cca 0,55 de lei/kWh, preț care cel mai probabil va rămâne valabil cel puțin până în vara anului 2025. Astfel, începând cu luna aprilie 2025, prețurile din facturi vor fi duble”, spune acesta. Expertul estimează că în vara anului 2025 concurența va reveni timid, iar în cel mai bun caz abia din 2026.\n\n\n\n2. Pregătirea reliberalizării pieței de gaze. Dumitru Chisăliță spune că pentru a preveni ca prețurile din contractele de gaze, care sunt duble acum, să devină efective, autoritățile trebuie să ia mai multe decizii. Acestea sunt informarea consumatorilor, profesionalizarea ANRE, ANPC și Consiliului Concurenței, înființarea unui centru de soluționare alternativă a litigiilor de pe piața energiei. Pe lângă acestea, el cere suspendarea pe 3 ani a prevederii din Codul Civil care permite furnizorilor să prelungească contractele fără semnătura efectivă a clienților. De asemenea, cere organizarea de către ANRE a unor sesiuni/acțiuni de ofertare concurențială de gaze începând cu 1 aprilie 2024, pentru refacerea concurenței, plus dezvoltarea unor mecanism transparente de suspendare a pieței libere în anumite momente și mecanismele aplicate în această perioadă.\n\n\n\n3. Menținerea unei piețe semireglementate. În această variantă rămâne în vigoare sistemul actual, în care se suspendă prețul din contracte și se aplică un preț plafonat, cu plata de la buget a diferenței între costurile de achiziție ale furnizorilor și prețul plafonat.\n\n\n\n4. Varianta reglementării pieței. Despre aceasta spune că este puțin probabil să fie acceptată de Uniunea Europeană. „Dacă varianta semireglementării a fost și probabil poate să rămână o variantă acceptată la nivelul UE, reglementarea pieței de gaze este o opțiune puțin probabilă, ținând cont de reglementările europene. Varianta aceasta va aduce prețuri care se bazează pe metoda cost plus, ceea ce nu previzionează prețuri mai mici la gaze în viitor”, conform lui Chisăliță.\n\n\n\nDoar piața liberă aduce prețuri mici\n\n\n\nAcesta spune că din toate cele patru variante, doar cea a pieței libere ar aduce prețuri mai mici.\n\n\n\n„Reglementarea prețului nu încurajează eficiența în sectorul gazelor naturale și de aici, nu poate aduce reduceri ale costurilor și respectiv prețuri mai mici la gaze”, punctează acesta.\n\n\n\nConcomitent, varianta semireglementării nu va aduce prețurile cele mai mici, dar nici nu va impune schimbări în cadrul instituțiilor statului și nici înființarea unei entități de soluționare alternativă a litigiilor.\n",
      "articleUrl": "https://www.libertatea.ro/stiri/expert-pretul-gazelor-va-exploda-in-romania-dupa-perioada-de-plafonare-4775730",
      "articleDatePublished": "2024-01-15",
      "multimedia_content": {
        "image_1": {
          "imageUrl": "https://static4.libertatea.ro/wp-content/uploads/2024/01/shutterstock1660250275-scaled.jpg",
          "imageId": "https://www.libertatea.ro/stiri/expert-pretul-gazelor-va-exploda-in-romania-dupa-perioada-de-plafonare-4775730#primaryimage",
          "width": 2560,
          "height": 1709,
          "imageDescription": "Expert: Prețul gazelor va exploda în România după perioada de plafonare"
        }
      },
      "organization": {
        "organizationName": "Libertatea",
        "organizationId": "https://www.libertatea.ro#organization",
        "organizationUrl": "https://www.libertatea.ro"
      },
      "author": {
        "authorName": "Daniel Ionașcu",
        "authorNationality": "RO",
        "authorId": "https://www.libertatea.ro/autor/daniel-ionascu#person",
        "authorUrl": "https://www.libertatea.ro/autor/daniel-ionascu"
      },
      "generatedAtTime": "2024-01-15T14:05:37+02:00",
      "articleId": "https://www.libertatea.ro/stiri/expert-pretul-gazelor-va-exploda-in-romania-dupa-perioada-de-plafonare-4775730#article",
      "articleDescription": "Știri energie ",
      "articleLanguage": "ro_RO",
      "genre": "Bani și Afaceri, Ştiri",
      "wordCount": 757,
      "keywords": "Știri energie"
    }

            </pre>

        </section>
        <section id="Modelling_data">
            <h2> 4. Modelling data </h2>
            <p> API documentation:</p>
            <h3>  OpenAPI: </h3>
            <p>A linked json file in OpenAPI made using:</p>
            <p>Click <a href="OpenAPISpec.json">HERE</a>to view JSON file in another tab.</p>
            <h3>  Data structure: </h3>
            <p> The classes used in modelling are: </p>
            <p> - schema.org Article class derived from CreativeWork class for article; </p>
            <p> - schema.org Organization class for the publication; </p>
            <p> - schema.org Person class for author; </p>
            <p> - schema.org VideoObject class for multimedia content; </p>
            <p> - skos Concept class for keywords search; </p>
            <p> - PROV-O ontology for provenance; </p>
            <p>
                The URI Reference for <b>articles</b> is "articleId" from json,
                and to the object were attached the literals for name,
                articleBody, datePublished, description, inLanguage, url, genre, wordCount,
                generatedAtTime, keywords all from the Article class.
                The <b>multimedia content</b> , as URI Reference was "imageId" or "videoId" from json,
                and as literal used were attributes contentUrl, description, width and height.
                Then it was associated the URI for article using VideoObject to the multimedia_uri,
                and multimedia uri linked with article uri using associatedArticle predicate.
                The <b>author</b> information was structured using Person class,
                added the URI Reference for the authorId from json and then article uri was linked to author uri.
                The literals for author were authorName, authorNationality.
                The author uri was linked to the <b>PROV ontology</b> that uses actedOnBehalfOf and linked it to the organization were it takes part.
                The <b>organization</b> is using the Organization class from schema.org and is linked to the author.
                Skos Concept class is used on the keywords structure, for a more efficient link between concepts.
            </p>
            <p> We use DBpedia to link the keywords in the Skos:Concept class to actual urls from the platform. Example below: </p>
                <p><b>https://dbpedia.org/page/Alcool a skos:Concept ;</b></p>
                    <p><b>skos:related "https://www.libertatea.ro/lifestyle/este-mai-sanatos-sa-bei-putin-decat-sa-nu-bei-deloc-ce-spun-trei-cercetatori-si-un-nutritionist-4557539#article .</b></p>


            <p> Turtle file for custom modeled data is:<a href="NEP/output.ttl"><b>Turtle file</b></a></p>
            <p>For providing the SPARQL endpoint and persistent storing the data we used Apache Jena Fuseki server</p>
            <h3>  Linked data Graph: </h3>
            <h4 class="center"> Web articles provenance linked custom linked dataset visualised</h4>
            <img src="d0f3ddaf-0329-471d-8c6a-bd3150232aa0.jpg" alt="Knowledge Graph visualised" class="center">
            <h4 class="center"> Linked graph close up</h4>
            <img src="Screenshot_3.jpg" alt="Knowledge Graph visualised" class="center">
            <h4 class="center"> Linked graph close up</h4>
            <img src="Screenshot_4.jpg" alt="Close up graph" class="center">
            <img src="Screenshot_2.jpg" alt="Close up graph" class="center">

        </section>
        <section id="Functionality">
            <h2>5. Functionality</h2>
            <h5>Overview</h5>
            <p>Using Django, we used the view controller mostly, with other additional Python files, one was used to
                help us with creating the ontology in Turtle format, from the original Json format; one was used for SPARQL queries
                and one for the communication with the Jena Fuseki server.</p>
            <p>In the RDFLibGraph, we created a Class that takes the JSON file and goes through a series of
                transformations so that we make the Turtle file as detailed as possible.</p>
            <pre><b>
                article_uri = URIRef(article_data['articleId'])
                g.add((article_uri, RDF.type, schema.Article))
            </b></pre>
            <p>After we connect every information that we needed in the handmade graph, we serialize it in Turtle format and
            save it in <b>output.tll</b> that is being uploaded in the Apache Jena Fuseki server.
            </p>
            <p>Above is an example of how we made it possible to make the graph in Python, using the<b><a href="https://rdflib.readthedocs.io/en/stable/">rdflib</a></b>library</p>
            <p>The other additional Python files were used for SPARQL queries that were sent to the Apache Jena Fuseki server.
            One of it contains a few SPARQL queries that were build for specific searches, while the other one imports the
            <b><a href="https://pypi.org/project/SPARQLWrapper/">SPARQLWrapper</a></b>. With it, we make sure that the query
            that we want to send to the server is being sent, and we get a result that is being sent to the View Python file.
            Below is an example of SPARQL queries</p>
            <pre><b>
                SELECT ?related_article ?imageUrl
                WHERE {
                  ?related_article a ns1:Article ;
                        ns1:genre {} ;
                        ns1:name ?article_name ;
                        ns1:articleBody ?article_body ;
                        prov:wasAttributedTo ?person ;
                        ns1:associatedMedia ?imageId .
                    ?imageId ns1:contentUrl ?imageUrl .
                  ?person a ns1:Person;
                     ns1:name ?name_author;
                }
                </b>This one searches for the articleID and the imageUrl that have a specific genre given by the user.
                <b>
                    SELECT ?authorname
                    WHERE {
                      ?articles ns1:keywords {} .
                      ?articles prov:wasAttributedTo ?author .
                      ?author rdf:type ns1:Person .
                      ?author ns1:name ?authorname.
                    }
            </b>Here we search for the author name of articles that have a specific keyword given by the user.
            </pre>
            <h5>Backend</h5>
            <p>Here is a Django API that uses Django REST Framework for filtering and retrieving information about
                articles based on keywords, authors, genres and any other additional filter. It has several API endpoints
                that use SPARQL queries to retrieve the RDF graph for the specific filter. It also renders the HTML templates
                dynamically based on the query results. HTML templates include options for filtering by keywords, authors and
                genres. These API endpoints return JSON responses containing the options selected by the user. For every error,
                it returns appropriate HTTP status codes. We have used global variables so that the information retrieved
                from the frontend remains the same in multiple <b>if else statements</b>. We have used different classes for every
                webpage so that we know where and when everything is and is easier for error handling.</p>
            <p>One of the API endpoints that we have used is named <b>FilterAuthorKeywordView</b>. First of all, we retrieve
                a list of keywords that we want the user to select from. We then render them to the user, where he selects the keyword
                that wants to search articles from. After he pressed the button confirming that selection, we catch that with
                an if where we make another SPARQL query where we get authors that are connected to articles that have the
                user selected keyword. After that, the user must select the author that wants to see articles from. After
                that selection is done, we send a JSON response to the webpage with the information the user requested.
            <pre><b>
            if request.GET.get('selectedOption'):
                keyword = request.GET.get('selectedOption')

                resultsAuthors = sparqlQuery.execute_query(
                    prefixes + sparql_generic_entries['in_author'].replace('{}',"&lt;https://dbpedia.org/page/" + keyword + ">"))
                for result in resultsAuthors:
                    authorsList.append(result['authorname']['value'])

                return JsonResponse({'authors': resultsAuthors})
        </b></pre></p>
        <h5>Frontend</h5>
            <p>In frontend we have combined the stylesheet, the html code and the javascript in one single file, as it was
            more convient for smaller webpage with few functionalities. First of all, we create 2 options boxes that will
            be filled with keywords and later authors, when the user presses the first button. We have created 2 buttons so
            that the functionalities do not overwrite each other when going through the filter. The first option box
            is populated with keyword variants that the user can select from. After that, the other option box is filled with
            authors that are related to the articles that contain those keywords. After the user is deciding on an author,
            all the articles written by that person are being displayed on the webpage, with the image in the thumbnail and
            the articleId that redirects to the news</p>
            <img src="filterkeywordauthor.PNG" alt="Example filter keyword/author" class="center">
        </section>
        <section id="References">
            <h2> 6. References: </h2>
             <a href="https://profs.info.uaic.ro/~busaco/teach/courses/wade/projects/index.html"> Project requirement </a>
            <p> Information tooked from: </p>
            <ul>
                <li> <a href="https://schema.org/CreativeWork"> CreativeWork from schema.org </a> </li>
                <li> <a href="https://schema.org/Article"> Article  from schema.org </a> </li>
                <li> <a href="https://schema.org/Person"> Person  from schema.org </a> </li>
                <li> <a href="https://www.w3.org/TR/prov-o/"> PROV ontology</a> </li>
                <li> <a href="https://aclanthology.org/L12-1323/"> About DBpedia </a> </li>
                <li> <a href="https://jena.apache.org/documentation/fuseki2/"> Jena Fuseki </a> </li>
                <li> <a href="https://www.w3.org/2009/08/skos-reference/skos.html"> SKOS Schema </a> </li>
            </ul>

        </section>
    </div>
</body>

</html>
